# Router Classification Benchmark Report

**Date**: 2026-02-10T21:07:14.870772+00:00
**Platform**: Darwin arm64
**Runs per combination**: 3
**Total API calls**: 4200

---

## Overall Leaderboard

| Rank | Model | Prompt | Weighted Acc | Strict Acc | Macro F1 | JSON % | Consistency | Mean Latency | P95 Latency |
|------|-------|--------|-------------|-----------|----------|--------|-------------|-------------|-------------|
| 1 | gemini-2.0-flash | v0 | 100.0% | 100.0% | 1.000 | 100% | 100.0% | 1534ms | 3832ms |
| 2 | gpt-4o-mini | v0 | 100.0% | 100.0% | 1.000 | 100% | 100.0% | 6064ms | 2276ms |
| 3 | claude-haiku-4-5-20251001 | v0 | 100.0% | 100.0% | 1.000 | 100% | 100.0% | 11311ms | 53443ms |
| 4 | phi3:mini | v0 | 96.3% | 95.3% | 0.889 | 100% | 99.3% | 885ms | 1030ms |
| 5 | gemini-2.0-flash | v3 | 96.3% | 94.0% | 0.987 | 100% | 99.3% | 1281ms | 1781ms |
| 6 | llama3.2:3b | v0 | 96.0% | 93.3% | 0.982 | 100% | 98.7% | 800ms | 1072ms |
| 7 | llama3.2:3b | v1 | 96.0% | 92.0% | 1.000 | 100% | 100.0% | 795ms | 984ms |
| 8 | claude-haiku-4-5-20251001 | v1 | 96.0% | 92.0% | 1.000 | 100% | 100.0% | 11533ms | 53788ms |
| 9 | gemini-2.0-flash | v1 | 95.0% | 90.0% | 1.000 | 100% | 100.0% | 1577ms | 3821ms |
| 10 | gpt-4o-mini | v3 | 95.0% | 92.0% | 0.980 | 100% | 99.3% | 1469ms | 2100ms |
| 11 | gpt-4o-mini | v1 | 94.0% | 90.0% | 0.978 | 100% | 100.0% | 1186ms | 1703ms |
| 12 | phi3:mini | v1 | 92.0% | 88.0% | 0.960 | 100% | 100.0% | 894ms | 1086ms |
| 13 | claude-haiku-4-5-20251001 | v2 | 92.0% | 88.0% | 0.950 | 100% | 100.0% | 11522ms | 52316ms |
| 14 | claude-haiku-4-5-20251001 | v3 | 88.0% | 84.7% | 0.932 | 91% | 98.7% | 11480ms | 52913ms |
| 15 | gemma2:2b | v1 | 87.7% | 84.7% | 0.821 | 100% | 99.3% | 1244ms | 1507ms |
| 16 | phi3:mini | v3 | 87.3% | 85.3% | 0.828 | 99% | 99.3% | 1156ms | 2158ms |
| 17 | gemma2:2b | v0 | 86.0% | 84.0% | 0.794 | 100% | 100.0% | 1267ms | 1442ms |
| 18 | gemini-2.0-flash | v2 | 84.3% | 78.7% | 0.854 | 100% | 99.3% | 1555ms | 3897ms |
| 19 | gemma2:2b | v3 | 84.0% | 80.0% | 0.848 | 100% | 99.3% | 1845ms | 4713ms |
| 20 | gpt-4o-mini | v2 | 82.7% | 76.7% | 0.819 | 100% | 99.3% | 1241ms | 1693ms |
| 21 | llama3.2:3b | v3 | 82.0% | 78.0% | 0.709 | 100% | 99.3% | 1281ms | 1619ms |
| 22 | gemma2:2b | v2 | 79.0% | 74.0% | 0.747 | 100% | 100.0% | 1460ms | 1693ms |
| 23 | llama3.2:3b | v2 | 75.7% | 70.7% | 0.673 | 100% | 99.3% | 919ms | 1105ms |
| 24 | llama3.2:1b | v0 | 71.7% | 71.3% | 0.726 | 100% | 98.0% | 732ms | 923ms |
| 25 | phi3:mini | v2 | 71.7% | 66.7% | 0.626 | 100% | 99.3% | 1051ms | 1299ms |
| 26 | llama3.2:1b | v1 | 68.3% | 64.7% | 0.583 | 100% | 97.3% | 746ms | 914ms |
| 27 | llama3.2:1b | v2 | 63.0% | 58.7% | 0.526 | 100% | 98.0% | 987ms | 1149ms |
| 28 | llama3.2:1b | v3 | 58.0% | 56.0% | 0.431 | 98% | 96.7% | 1060ms | 1650ms |

---

## The Bug Case: "Are you there?"

| Model | Prompt | Predicted | Confidence | Correct? |
|-------|--------|-----------|------------|----------|
| gemini-2.0-flash | v0 | simple_query | 0.90 | YES |
| gpt-4o-mini | v0 | simple_query | 0.90 | YES |
| claude-haiku-4-5-20251001 | v0 | simple_query | 0.95 | YES |
| phi3:mini | v0 | simple_query | 0.95 | YES |
| gemini-2.0-flash | v3 | simple_query | 1.00 | YES |
| llama3.2:3b | v0 | simple_query | 0.90 | YES |
| llama3.2:3b | v1 | simple_query | 1.00 | YES |
| claude-haiku-4-5-20251001 | v1 | simple_query | 0.99 | YES |
| gemini-2.0-flash | v1 | simple_query | 0.95 | YES |
| gpt-4o-mini | v3 | simple_query | 1.00 | YES |
| gpt-4o-mini | v1 | simple_query | 1.00 | YES |
| phi3:mini | v1 | simple_query | 1.00 | YES |
| claude-haiku-4-5-20251001 | v2 | simple_query | 0.95 | YES |
| claude-haiku-4-5-20251001 | v3 | simple_query | 0.95 | YES |
| gemma2:2b | v1 | simple_query | 0.95 | YES |
| phi3:mini | v3 | simple_query | 1.00 | YES |
| gemma2:2b | v0 | simple_query | 0.95 | YES |
| gemini-2.0-flash | v2 | simple_query | 0.90 | YES |
| gemma2:2b | v3 | simple_query | 0.95 | YES |
| gpt-4o-mini | v2 | simple_query | 0.95 | YES |
| llama3.2:3b | v3 | memory_recall | 1.00 | NO |
| gemma2:2b | v2 | simple_query | 0.95 | YES |
| llama3.2:3b | v2 | simple_query | 1.00 | YES |
| llama3.2:1b | v0 | simple_query | 0.80 | YES |
| phi3:mini | v2 | simple_query | 1.00 | YES |
| llama3.2:1b | v1 | system_command | 0.90 | NO |
| llama3.2:1b | v2 | simple_query | 0.80 | YES |
| llama3.2:1b | v3 | greeting | 0.80 | NO |

---

## Local vs Cloud Comparison

- **Best local**: 96.3% weighted accuracy
- **Mean local**: 80.9% weighted accuracy
- **Best cloud**: 100.0% weighted accuracy
- **Mean cloud**: 93.6% weighted accuracy
- **Gap (best cloud - best local)**: +3.7%

---

## Prompt Impact

| Prompt | Mean Weighted Acc | Best | Worst |
|--------|-------------------|------|-------|
| v0 | 92.9% | 100.0% | 71.7% |
| v1 | 89.9% | 96.0% | 68.3% |
| v2 | 78.3% | 92.0% | 63.0% |
| v3 | 84.4% | 96.3% | 58.0% |

---

## Per-Intent Breakdown (Best: gemini-2.0-flash_v0)

| Intent | Precision | Recall | F1 | TP | FP | FN |
|--------|-----------|--------|-----|----|----|-----|
| calendar_query | 1.000 | 1.000 | 1.000 | 15 | 0 | 0 |
| complex_task | 1.000 | 1.000 | 1.000 | 18 | 0 | 0 |
| email_management | 1.000 | 1.000 | 1.000 | 12 | 0 | 0 |
| memory_recall | 1.000 | 1.000 | 1.000 | 15 | 0 | 0 |
| memory_store | 1.000 | 1.000 | 1.000 | 15 | 0 | 0 |
| personal_model | 1.000 | 1.000 | 1.000 | 12 | 0 | 0 |
| profile_query | 1.000 | 1.000 | 1.000 | 12 | 0 | 0 |
| simple_query | 1.000 | 1.000 | 1.000 | 24 | 0 | 0 |
| system_command | 1.000 | 1.000 | 1.000 | 12 | 0 | 0 |
| task_management | 1.000 | 1.000 | 1.000 | 15 | 0 | 0 |

---

## Confidence Calibration

| Model | Prompt | ECE | Overconfidence Rate |
|-------|--------|-----|---------------------|
| gemini-2.0-flash | v0 | 0.0550 | 0.0% |
| gpt-4o-mini | v0 | 0.0897 | 0.0% |
| claude-haiku-4-5-20251001 | v0 | 0.0511 | 0.0% |
| phi3:mini | v0 | 0.0060 | 100.0% |
| gemini-2.0-flash | v3 | 0.0433 | 100.0% |
| llama3.2:3b | v0 | 0.0687 | 50.0% |
| llama3.2:3b | v1 | 0.0567 | 0.0% |
| claude-haiku-4-5-20251001 | v1 | 0.0473 | 0.0% |
| gemini-2.0-flash | v1 | 0.0593 | 0.0% |
| gpt-4o-mini | v3 | 0.0553 | 66.7% |
| gpt-4o-mini | v1 | 0.0567 | 100.0% |
| phi3:mini | v1 | 0.0040 | 66.7% |
| claude-haiku-4-5-20251001 | v2 | 0.0139 | 100.0% |
| claude-haiku-4-5-20251001 | v3 | 0.0423 | 0.0% |
| gemma2:2b | v1 | 0.0193 | 78.6% |
| phi3:mini | v3 | 0.0600 | 75.0% |
| gemma2:2b | v0 | 0.0510 | 83.3% |
| gemini-2.0-flash | v2 | 0.0330 | 100.0% |
| gemma2:2b | v3 | 0.0380 | 77.8% |
| gpt-4o-mini | v2 | 0.0380 | 70.6% |
| llama3.2:3b | v3 | 0.0607 | 71.4% |
| gemma2:2b | v2 | 0.1057 | 87.5% |
| llama3.2:3b | v2 | 0.1333 | 58.6% |
| llama3.2:1b | v0 | 0.0987 | 0.0% |
| phi3:mini | v2 | 0.2083 | 100.0% |
| llama3.2:1b | v1 | 0.1467 | 66.7% |
| llama3.2:1b | v2 | 0.1780 | 20.4% |
| llama3.2:1b | v3 | 0.2520 | 65.0% |

---

*Generated by scripts/benchmark-router.py*
